  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (3.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201004211727)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (65.2ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (4.2ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.174633"], ["updated_at", "2020-10-04 21:17:30.174633"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-04 21:17:30.189173"], ["updated_at", "2020-10-04 21:17:30.189173"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-04 21:17:30.191271"], ["updated_at", "2020-10-04 21:17:30.191271"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (1.1ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 598], [nil, 599]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.201300"], ["updated_at", "2020-10-04 21:17:30.201300"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.207177"], ["updated_at", "2020-10-04 21:17:30.207177"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.212691"], ["updated_at", "2020-10-04 21:17:30.212691"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.8ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.5ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.2ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.226423"], ["updated_at", "2020-10-04 21:17:30.226423"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.234559"], ["updated_at", "2020-10-04 21:17:30.234559"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-04 21:17:30.240349"], ["updated_at", "2020-10-04 21:17:30.240349"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (24.1ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.4ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-04 21:17:30.279658"], ["updated_at", "2020-10-04 21:17:30.279658"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (0.8ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.4ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 607], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (29.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201009201234)
  [1m[35m (40.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.5ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (5.2ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.059672"], ["updated_at", "2020-10-09 20:12:38.059672"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.8ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-09 20:12:38.078443"], ["updated_at", "2020-10-09 20:12:38.078443"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.0ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-09 20:12:38.083188"], ["updated_at", "2020-10-09 20:12:38.083188"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (30.5ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 608], [nil, 609]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.7ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.126093"], ["updated_at", "2020-10-09 20:12:38.126093"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.138932"], ["updated_at", "2020-10-09 20:12:38.138932"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.145034"], ["updated_at", "2020-10-09 20:12:38.145034"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (2.2ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (1.4ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.7ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.174335"], ["updated_at", "2020-10-09 20:12:38.174335"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.181792"], ["updated_at", "2020-10-09 20:12:38.181792"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.6ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:12:38.189709"], ["updated_at", "2020-10-09 20:12:38.189709"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.6ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (25.2ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-09 20:12:38.233141"], ["updated_at", "2020-10-09 20:12:38.233141"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (27.8ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.5ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 617], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201009201414)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-09 20:14:16.965386"], ["updated_at", "2020-10-09 20:14:16.965386"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-09 20:14:16.979714"], ["updated_at", "2020-10-09 20:14:16.979714"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-09 20:14:16.982330"], ["updated_at", "2020-10-09 20:14:16.982330"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (1.4ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 618], [nil, 619]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.7ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:16.997269"], ["updated_at", "2020-10-09 20:14:16.997269"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.0ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:17.006437"], ["updated_at", "2020-10-09 20:14:17.006437"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:17.015140"], ["updated_at", "2020-10-09 20:14:17.015140"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.6ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:17.034795"], ["updated_at", "2020-10-09 20:14:17.034795"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:17.040739"], ["updated_at", "2020-10-09 20:14:17.040739"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:14:17.050461"], ["updated_at", "2020-10-09 20:14:17.050461"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (0.6ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.2ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-09 20:14:17.066852"], ["updated_at", "2020-10-09 20:14:17.066852"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (0.7ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 627], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201009202146)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (45.6ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.7ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.819819"], ["updated_at", "2020-10-09 20:21:49.819819"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.6ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-09 20:21:49.834042"], ["updated_at", "2020-10-09 20:21:49.834042"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-09 20:21:49.837584"], ["updated_at", "2020-10-09 20:21:49.837584"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (1.0ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 628], [nil, 629]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.9ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.0ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.849517"], ["updated_at", "2020-10-09 20:21:49.849517"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.859792"], ["updated_at", "2020-10-09 20:21:49.859792"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.866075"], ["updated_at", "2020-10-09 20:21:49.866075"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.9ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.5ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (3.2ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (1.2ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.895179"], ["updated_at", "2020-10-09 20:21:49.895179"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.6ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.901810"], ["updated_at", "2020-10-09 20:21:49.901810"]]
  [1m[35m (2.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (2.1ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (2.8ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:21:49.917679"], ["updated_at", "2020-10-09 20:21:49.917679"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (0.5ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.2ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-09 20:21:49.944570"], ["updated_at", "2020-10-09 20:21:49.944570"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (0.7ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 637], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201009202522)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (43.3ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.0ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.369533"], ["updated_at", "2020-10-09 20:25:26.369533"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-09 20:25:26.384007"], ["updated_at", "2020-10-09 20:25:26.384007"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-09 20:25:26.386264"], ["updated_at", "2020-10-09 20:25:26.386264"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (1.8ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 638], [nil, 639]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (1.1ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.404626"], ["updated_at", "2020-10-09 20:25:26.404626"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.9ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.411281"], ["updated_at", "2020-10-09 20:25:26.411281"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.6ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.419022"], ["updated_at", "2020-10-09 20:25:26.419022"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (1.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.4ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.0ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.436400"], ["updated_at", "2020-10-09 20:25:26.436400"]]
  [1m[35m (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.6ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.449650"], ["updated_at", "2020-10-09 20:25:26.449650"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.6ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:25:26.454527"], ["updated_at", "2020-10-09 20:25:26.454527"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.7ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (0.3ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.4ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-09 20:25:26.472410"], ["updated_at", "2020-10-09 20:25:26.472410"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (1.1ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.4ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 647], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201009202652)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.2ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.2ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-09 20:26:54.974726"], ["updated_at", "2020-10-09 20:26:54.974726"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-09 20:26:54.987336"], ["updated_at", "2020-10-09 20:26:54.987336"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-09 20:26:54.990060"], ["updated_at", "2020-10-09 20:26:54.990060"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (1.1ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 648], [nil, 649]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (1.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.006373"], ["updated_at", "2020-10-09 20:26:55.006373"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.7ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.013965"], ["updated_at", "2020-10-09 20:26:55.013965"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.023125"], ["updated_at", "2020-10-09 20:26:55.023125"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.8ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.5ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.042850"], ["updated_at", "2020-10-09 20:26:55.042850"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (1.1ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (3.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.055163"], ["updated_at", "2020-10-09 20:26:55.055163"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.3ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-09 20:26:55.062404"], ["updated_at", "2020-10-09 20:26:55.062404"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (0.8ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.9ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-09 20:26:55.079907"], ["updated_at", "2020-10-09 20:26:55.079907"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (0.7ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 657], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (42.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateArticleStats (20201010211556)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (64.2ms)[0m  [1m[35mCREATE TABLE "article_stats" ("id" bigserial primary key, "logdate" date, "pageviews" integer, "site" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (3.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 1], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.214408"], ["updated_at", "2020-10-10 21:15:59.214408"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "MX"], ["created_at", "2020-10-10 21:15:59.231090"], ["updated_at", "2020-10-10 21:15:59.231090"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["pageviews", 100], ["site", "ua"], ["created_at", "2020-10-10 21:15:59.234227"], ["updated_at", "2020-10-10 21:15:59.234227"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/in_site (27.5ms)[0m  [1m[34mSELECT id FROM article_stats WHERE LOWER(site) IN ($1, $2) AND id IN ($3, $4) ORDER BY id;[0m  [[nil, "cl"], [nil, "mx"], [nil, 658], [nil, 659]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.7ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.278405"], ["updated_at", "2020-10-10 21:15:59.278405"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.289414"], ["updated_at", "2020-10-10 21:15:59.289414"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (1.1ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.296221"], ["updated_at", "2020-10-10 21:15:59.296221"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (2.5ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/by_site (0.4ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.7ms)[0m  [1m[34mselect name, statement from pg_prepared_statements[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.7ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.318842"], ["updated_at", "2020-10-10 21:15:59.318842"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.7ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.4ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.325326"], ["updated_at", "2020-10-10 21:15:59.325326"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.5ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.3ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-02-01"], ["pageviews", 123], ["site", "cl"], ["created_at", "2020-10-10 21:15:59.333949"], ["updated_at", "2020-10-10 21:15:59.333949"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/by_site (0.6ms)[0m  [1m[34mSELECT   $2 AS current_site,   id,   pageviews,   site FROM article_stats WHERE site = $3 AND logdate >= $1;[0m  [[nil, "2020-02-01"], [nil, "af"], [nil, "cl"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36marticle_stats/insert_returning_id_pageviews (24.1ms)[0m  [1m[32mINSERT INTO   article_stats (id, logdate, pageviews, site, created_at, updated_at)   VALUES ($1, CURRENT_DATE, $2, $3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)   RETURNING id, pageviews, site;[0m  [[nil, 666], [nil, 321], [nil, "ua"]]
  [1m[36mArticleStat Load (0.3ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 666], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mArticleStat Create (0.5ms)[0m  [1m[32mINSERT INTO "article_stats" ("logdate", "pageviews", "site", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["logdate", "2020-08-01"], ["pageviews", 1000], ["site", "nl"], ["created_at", "2020-10-10 21:15:59.374487"], ["updated_at", "2020-10-10 21:15:59.374487"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36marticle_stats/update_pageviews (30.4ms)[0m  [1m[33mUPDATE article_stats   SET pageviews = ROUND(pageviews::decimal * $1)   WHERE site = $2   RETURNING pageviews;[0m  [[nil, 1.5], [nil, "nl"]]
  [1m[36mArticleStat Load (0.6ms)[0m  [1m[34mSELECT "article_stats".* FROM "article_stats" WHERE "article_stats"."id" = $1 LIMIT $2[0m  [["id", 667], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7567055513592048600)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
